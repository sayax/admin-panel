"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[874],{7874:(M,g,a)=>{a.r(g),a.d(g,{TeacherListModule:()=>u});var f=a(4666),e=a(2560),o=a(3870),y=a(3609),A=a(2673),v=a(635),S=a(9345),C=a(9785);class m{constructor(){this.firestore=(0,e.f3M)(o.gg),this.teacherCollection=(0,o.hJ)(this.firestore,S.F.TEACHER),this.userApiService=(0,e.f3M)(C.Q)}getTeachers(){const t=(0,o.IO)(this.teacherCollection,(0,o.ar)("is_active","==",!0));return(0,y.D)((0,o.PL)(t)).pipe((0,A.w)(c=>{const n=c.docs.map(h=>h.data()),T=n.reduce((h,i)=>({...h,[i.profile_uid]:i}),{}),z=n.map(h=>h.profile_uid);return this.userApiService.getUsersInList(z).pipe((0,v.U)(h=>h.map(i=>({uid:T[i.uid].uid,phone:i.phone,email:i.email,first_name:i.first_name,middle_name:i.middle_name,last_name:i.last_name,avatar_url:i.avatar_urls[0],start_date:T[i.uid].start_date,styles:T[i.uid].styles}))))}))}getTeacher(t){const s=(0,o.JU)(this.teacherCollection,t);return(0,y.D)((0,o.QT)(s)).pipe((0,v.U)(c=>c.data()),(0,A.w)(c=>this.userApiService.getUser(c.profile_uid).pipe((0,v.U)(n=>({uid:c.uid,phone:n.phone,email:n.email,first_name:n.first_name,middle_name:n.middle_name,last_name:n.last_name,avatar_url:n.avatar_urls[0],start_date:c.start_date,styles:c.styles})))))}}m.\u0275fac=function(t){return new(t||m)},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});class p{constructor(){this.teacherApiService=(0,e.f3M)(m)}getList(){return this.teacherApiService.getTeachers()}}p.\u0275fac=function(t){return new(t||p)},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var l=a(5403);function L(r,t){if(1&r&&(e.TgZ(0,"nb-list-item"),e._UZ(1,"nb-user",2),e.qZA()),2&r){const s=t.$implicit;e.xp6(1),e.Q6J("picture",s.avatar_url)("name",s.first_name+" "+s.last_name)("title","\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c")}}class d{constructor(){this.teacherService=(0,e.f3M)(p),this.list$=this.teacherService.getList()}}d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-teacher-list"]],decls:4,vars:3,consts:[["size","large"],[4,"ngFor","ngForOf"],[3,"picture","name","title"]],template:function(t,s){1&t&&(e.TgZ(0,"nb-card",0)(1,"nb-list"),e.YNc(2,L,2,3,"nb-list-item",1),e.ALo(3,"async"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,s.list$)))},dependencies:[f.sg,l.zP_,l.qBV,l.Asz,l.k0$,f.Ov]});var F=a(8847);class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[f.ez,l.COg,l.zyh,l.AE1,F.Bz.forChild([{path:"",component:d,data:{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}}])]})}}]);
//# sourceMappingURL=874.03afeb0e02558ce4.js.map