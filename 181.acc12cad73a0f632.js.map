{"version":3,"file":"181.acc12cad73a0f632.js","mappings":"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","names":["CalendarService","constructor","this","inject","NbAuthService","EventsApiService","UserApiService","getEvents","authService","getToken","pipe","mergeMap","token","eventApiService","getFilteredEvents","map","events","console","log","event","convertEventToCalendar","getPayload","user_id","getUsersByIds","uids","userApiService","getUsersInList","updateEnrolledParticipants","uid","enrolled_participants","removeEnrolledParticipants","id","start","Date","start_date","toMillis","end","end_date","undefined","title","color","colors","allDay","cssClass","meta","teacher_uids","is_enrolled","includes","factory","DateFormatterService","CalendarDateFormatter","monthViewColumnHeader","date","locale","formatDate","dayViewHour","weekViewHour","t","CustomEventTitleFormatter","CalendarEventTitleFormatter","super","month","week","day","core","LOCALE_ID","CalendarHeaderComponent","EventEmitter","CalendarView","selectors","i0","ctx","CalendarComponent","NbDialogService","NbToastrService","Router","Object","values","calculateRows","window","innerWidth","view","ngOnInit","getData","events$","calendarService","selectView","openDialog","dialog","context","ref","dialogService","open","dayClicked","isSameMonth","viewDate","isSameDay","activeDayIsOpen","length","entry","loading","subscribe","complete","toastr","show","status","close","error","message","removeEntry","navigate","router","provide","useClass","decls","AppCalendarModule","CommonModule","CalendarModule","NbLayoutModule","NbCardModule","NbButtonModule","NbSelectModule","NbIconModule","NbListModule","SharedModule","RouterModule","path","component","data"],"sourceRoot":"webpack:///","sources":["./src/app/calendar/services/calendar.service.ts","./src/app/calendar/services/date-formatter.service.ts","./src/app/calendar/components/calendar-header/calendar-header.component.ts","./src/app/calendar/components/calendar-header/calendar-header.component.html","./src/app/calendar/containers/calendar/calendar.component.html","./src/app/calendar/containers/calendar/calendar.component.ts","./src/app/calendar/calendar.module.ts"],"sourcesContent":["import { Injectable, inject } from '@angular/core';\nimport { CalendarEvent } from 'angular-calendar';\nimport { Observable, map, mergeMap, switchMap } from 'rxjs';\nimport { ICalendarEvent } from 'src/app/backend/model/event';\nimport { colors } from '../utils/colors';\nimport { Timestamp } from '@angular/fire/firestore';\nimport { NbAuthService } from '@nebular/auth';\nimport { UserApiService } from 'src/app/backend/services/user-api.service';\nimport { ProfileDTO } from 'src/app/backend/model/profile';\nimport { EventsApiService } from 'src/app/backend/services/events-api.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CalendarService {\n  private authService = inject(NbAuthService);\n  private eventApiService = inject(EventsApiService);\n  private userApiService = inject(UserApiService);\n\n  getEvents(): Observable<CalendarEvent[]> {\n    return this.authService.getToken().pipe(\n      mergeMap(token => this.eventApiService.getFilteredEvents().pipe(\n        map(events => {\n          console.log('events', events)\n          return events.map(event => this.convertEventToCalendar(event, token.getPayload().user_id))\n        }),\n      ))\n    );\n  }\n\n  getUsersByIds(uids: string[]): Observable<ProfileDTO[]> {\n    return this.userApiService.getUsersInList(uids);\n  }\n\n  updateEnrolledParticipants(uid: string): Observable<void> {\n    return this.authService.getToken().pipe(\n      mergeMap(token => this.eventApiService.updateEnrolledParticipants({\n        uid,\n        enrolled_participants: token.getPayload().user_id,\n      }))\n    )\n  }\n\n  removeEnrolledParticipants(uid: string): Observable<void> {\n    return this.authService.getToken().pipe(\n      mergeMap(token => this.eventApiService.removeEnrolledParticipants({\n        uid,\n        enrolled_participants: token.getPayload().user_id,\n      }))\n    )\n  }\n\n  private convertEventToCalendar(event: ICalendarEvent, user_id: string): CalendarEvent {\n    return {\n      id: event.uid,\n      start: new Date(event.start_date.toMillis()),\n      end: event.end_date ? new Date(event.end_date.toMillis()) : undefined,\n      title: event.title,\n      color: colors[event.colors],\n      allDay: event.allDay,\n      cssClass: event.cssClass,\n      meta: {\n        ...event.meta,\n        teacher_uids: event.teacher_uids,\n        is_enrolled: !!event.enrolled_participants?.includes(user_id),\n      },\n    }\n  }\n}\n","import { formatDate } from '@angular/common';\nimport { Injectable, Inject, LOCALE_ID } from '@angular/core';\nimport { CalendarDateFormatter, CalendarEvent, CalendarEventTitleFormatter, DateFormatterParams } from 'angular-calendar';\n\n@Injectable()\nexport class DateFormatterService extends CalendarDateFormatter {\n  public override monthViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'EEEE', 'ru');\n  }\n\n  public override dayViewHour({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'HH:mm', 'ru');\n  }\n\n  public override weekViewHour({ date, locale }: DateFormatterParams): string {\n    return this.dayViewHour({ date, locale: locale });\n  }\n}\n\n@Injectable()\nexport class CustomEventTitleFormatter extends CalendarEventTitleFormatter {\n  constructor(@Inject(LOCALE_ID) private locale: string) {\n    super();\n  }\n\n  // you can override any of the methods defined in the parent class\n\n  override month(event: CalendarEvent): string {\n    return `<b>${formatDate(event.start, 'HH:mm', this.locale)}</b> ${\n      event.title\n    }`;\n  }\n\n  override week(event: CalendarEvent): string {\n    return `<b>${formatDate(event.start, 'HH:mm', this.locale)}</b> ${\n      event.title\n    }`;\n  }\n\n  override day(event: CalendarEvent): string {\n    return `<b>${formatDate(event.start, 'HH:mm', this.locale)}</b> ${\n      event.title\n    }`;\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { CalendarView } from 'angular-calendar';\n\n@Component({\n  selector: 'app-calendar-header',\n  templateUrl: './calendar-header.component.html',\n  styleUrls: ['./calendar-header.component.scss'],\n})\nexport class CalendarHeaderComponent {\n  @Input() view!: CalendarView;\n\n  @Input() viewDate!: Date;\n\n  @Input() locale: string = 'ru';\n\n  @Output() viewChange = new EventEmitter<CalendarView>();\n\n  @Output() viewDateChange = new EventEmitter<Date>();\n\n  CalendarView = CalendarView;\n}\n","<div class=\"header\">\n  <div class=\"col-md-4\">\n    <div class=\"btn-group\">\n      <div class=\"btn btn-primary\" mwlCalendarPreviousView [view]=\"view\" [(viewDate)]=\"viewDate\"\n        (viewDateChange)=\"viewDateChange.next(viewDate)\">\n        <nb-icon icon=\"arrow-ios-back-outline\"></nb-icon>\n      </div>\n      <div class=\"btn btn-outline-secondary\" mwlCalendarToday [(viewDate)]=\"viewDate\"\n        (viewDateChange)=\"viewDateChange.next(viewDate)\">\n        Сегодня\n      </div>\n      <div class=\"btn btn-primary\" mwlCalendarNextView [view]=\"view\" [(viewDate)]=\"viewDate\"\n        (viewDateChange)=\"viewDateChange.next(viewDate)\">\n        <nb-icon icon=\"arrow-ios-forward-outline\"></nb-icon>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-md-4\">\n    <h3>{{ viewDate | calendarDate: view + 'ViewTitle' }}</h3>\n  </div>\n  <div class=\"col-md-4\">\n  </div>\n</div>\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        <nb-select class=\"desktop\" name=\"view\" [selected]=\"view\" (selectedChange)=\"selectView($event)\">\n          <nb-option *ngFor=\"let option of calendarViewOptions\" [value]=\"option\">{{ option }}</nb-option>\n        </nb-select>\n      </nb-card-header>\n      <nb-card-body [ngSwitch]=\"view\">\n        <app-calendar-header [(view)]=\"view\" [(viewDate)]=\"viewDate\">\n        </app-calendar-header>\n        <mwl-calendar-month-view *ngSwitchCase=\"'month'\" precision=\"minutes\" [viewDate]=\"viewDate\"\n          [activeDayIsOpen]=\"activeDayIsOpen\" [events]=\"(events$ | async) || []\" (dayClicked)=\"dayClicked($event.day)\"\n          (eventClicked)=\"openDialog(showInfo, $event.event)\">\n        </mwl-calendar-month-view>\n        <mwl-calendar-week-view *ngSwitchCase=\"'week'\" [dayStartHour]=\"9\" [dayEndHour]=\"23\" precision=\"minutes\" [viewDate]=\"viewDate\"\n          [events]=\"(events$ | async) || []\" (eventClicked)=\"openDialog(showInfo, $event.event)\">\n        </mwl-calendar-week-view>\n        <mwl-calendar-day-view *ngSwitchCase=\"'day'\" [dayStartHour]=\"9\" [dayEndHour]=\"23\" precision=\"minutes\" [viewDate]=\"viewDate\"\n          [events]=\"(events$ | async) || []\" (eventClicked)=\"openDialog(showInfo, $event.event)\">\n        </mwl-calendar-day-view>\n      </nb-card-body>\n    </nb-card>\n\n    <ng-template #showInfo let-data let-ref=\"dialogRef\">\n      <nb-card>\n        <nb-card-header>Информация</nb-card-header>\n        <nb-card-body>\n          <nb-list>\n            <nb-list-item>\n              <div class=\"title\">Название:</div>\n              <div class=\"value\">{{ data.title }}</div>\n            </nb-list-item>\n            <nb-list-item *ngIf=\"data.meta.teacher_uids\">\n              <div class=\"title\">Преподаватели:</div>\n              <div class=\"value\">\n                <div *ngFor=\"let uid of data.meta.teacher_uids\">\n                  <span *ngIf=\"uid | user | async as user\">{{ user?.first_name }} {{ user?.last_name }} </span>\n                </div>\n              </div>\n            </nb-list-item>\n            <nb-list-item>\n              <div class=\"title\">Начало:</div>\n              <div class=\"value\">{{ data.start | date: 'dd.MM.yyyy HH:mm' }}</div>\n            </nb-list-item>\n            <nb-list-item *ngIf=\"data.end\">\n              <div class=\"title\">Окончание:</div>\n              <div class=\"value\">{{ data.end | date: 'dd.MM.yyyy HH:mm' }}</div>\n            </nb-list-item>\n          </nb-list>\n        </nb-card-body>\n        <nb-card-footer>\n          <button nbButton status=\"primary\" *ngIf=\"!data.meta.is_enrolled\" outline [disabled]=\"loading\" (click)=\"entry(data.id)\">Записаться</button>\n          <button nbButton status=\"primary\" *ngIf=\"data.meta.is_enrolled\" outline [disabled]=\"loading\" (click)=\"removeEntry(data.id)\">Убрать запись</button>\n          <button nbButton status=\"primary\" class=\"card-button\" (click)=\"navigate(data.id)\">Редактировать</button>\n        </nb-card-footer>\n      </nb-card>\n    </ng-template>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, HostListener, OnInit, TemplateRef, inject } from '@angular/core';\nimport { CalendarDateFormatter, CalendarEvent, CalendarEventTitleFormatter, CalendarView } from 'angular-calendar';\nimport { CalendarService } from '../../services/calendar.service';\nimport { CustomEventTitleFormatter, DateFormatterService } from '../../services/date-formatter.service';\nimport { Observable } from 'rxjs';\nimport { NbDialogRef, NbDialogService, NbToastrService } from '@nebular/theme';\nimport { isSameDay, isSameMonth } from 'date-fns';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss'],\n  providers: [\n    {\n      provide: CalendarDateFormatter,\n      useClass: DateFormatterService,\n    },\n    {\n      provide: CalendarEventTitleFormatter,\n      useClass: CustomEventTitleFormatter,\n    },\n  ]\n})\nexport class CalendarComponent implements OnInit {\n  private calendarService = inject(CalendarService);\n  private dialogService = inject(NbDialogService);\n  private toastr = inject(NbToastrService);\n  private router = inject(Router);\n\n  private ref!: NbDialogRef<any>;\n  loading = false;\n  activeDayIsOpen = true;\n\n  CalendarView = CalendarView;\n  calendarViewOptions = Object.values(CalendarView);\n\n  viewDate: Date = new Date();\n  view: CalendarView = CalendarView.Month;\n\n  events$!: Observable<CalendarEvent[]>;\n  selectedEvent!: CalendarEvent;\n\n\n  @HostListener('window:resize', ['$event']) calculateRows() {\n    if (window.innerWidth < 768) {\n      this.view = CalendarView.Day;\n    }\n  }\n\n  ngOnInit(): void {\n    this.calculateRows();\n    this.getData();\n  }\n\n  getData() {\n    this.events$ = this.calendarService.getEvents();\n  }\n\n  selectView(event: CalendarView) {\n    this.view = event;\n  }\n\n  openDialog(dialog: TemplateRef<any>, context?: any) {\n    this.ref = this.dialogService.open(dialog, {\n      context,\n    });\n  }\n\n  dayClicked({ date, events }: { date: Date; events: CalendarEvent[] }): void {\n    if (isSameMonth(date, this.viewDate)) {\n      if (\n        (isSameDay(this.viewDate, date) && this.activeDayIsOpen === true) ||\n        events.length === 0\n      ) {\n        this.activeDayIsOpen = false;\n      } else {\n        this.activeDayIsOpen = true;\n      }\n      this.viewDate = date;\n    }\n  }\n\n  entry(uid: string) {\n    this.loading = true;\n    this.calendarService.updateEnrolledParticipants(uid).subscribe({\n      complete: () => {\n        this.toastr.show('Спасибо что записались', 'Данные сохранены', { status: 'success' });\n        this.loading = false;\n        this.ref.close();\n        this.getData();\n      },\n      error: (error) => {\n        this.toastr.show(error?.message, 'Произошла ошибка', { status: 'danger' });\n        console.log('error', error);\n        this.loading = false;\n      },\n    })\n  }\n\n  removeEntry(uid: string) {\n    this.loading = true;\n    this.calendarService.removeEnrolledParticipants(uid).subscribe({\n      complete: () => {\n        this.toastr.show('Вы убрали запись', 'Данные сохранены', { status: 'success' });\n        this.loading = false;\n        this.ref.close();\n        this.getData();\n      },\n      error: (error) => {\n        this.toastr.show(error?.message, 'Произошла ошибка', { status: 'danger' });\n        console.log('error', error);\n        this.loading = false;\n      },\n    })\n  }\n\n  navigate(id: string) {\n    this.ref.close();\n    this.router.navigate(['event', id]);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CalendarComponent } from './containers/calendar/calendar.component';\nimport { RouterModule } from '@angular/router';\nimport { CalendarModule } from 'angular-calendar';\nimport { NbButtonModule, NbCardModule, NbCheckboxModule, NbDatepickerModule, NbIconModule, NbInputModule, NbLayoutModule, NbListModule, NbSelectModule } from '@nebular/theme';\nimport { CalendarHeaderComponent } from './components/calendar-header/calendar-header.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../shared/shared.module';\n\n\n\n@NgModule({\n  declarations: [\n    CalendarComponent,\n    CalendarHeaderComponent,\n  ],\n  imports: [\n    CommonModule,\n    CalendarModule,\n    NbLayoutModule,\n    NbCardModule,\n    NbButtonModule,\n    NbSelectModule,\n    NbIconModule,\n    NbListModule,\n    NbIconModule,\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: CalendarComponent,\n        data: {\n          title: 'Расписание',\n        }\n      },\n    ]),\n  ]\n})\nexport class AppCalendarModule { }\n"],"x_google_ignoreList":[]}