"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[179],{9345:(h,f,e)=>{var i,n;e.d(f,{F:()=>i}),(n=i||(i={})).PROFILE="profile",n.TEACHER="teacher"},3954:(h,f,e)=>{e.d(f,{y:()=>s});var i=e(2560),n=e(7204),t=e(3609);class s{constructor(){this.fireStorage=(0,i.f3M)(n.Ke)}uploadFile(c,v){if(!c)throw new Error("File not provided");const m=(0,n.iH)(this.fireStorage,`${v}/${Date.now()}-${c.name}`),g=(0,n.KV)(m,c);return(0,t.D)(g)}getMedia(c){const v=(0,n.iH)(this.fireStorage,c);return(0,t.D)((0,n.Jt)(v))}}s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})},9785:(h,f,e)=>{e.d(f,{Q:()=>g});var i=e(2560),n=e(8873),t=e(6413),s=e(3609),u=e(635),c=e(745),v=e(2673),m=e(9345);class g{constructor(){this.firestore=(0,i.f3M)(n.gg),this.profileCollection=(0,n.hJ)(this.firestore,m.F.PROFILE)}getUsers(){const o=(0,n.IO)(this.profileCollection);return(0,s.D)((0,n.PL)(o)).pipe((0,u.U)(d=>d.docs.map(p=>p.data())))}getUsersNotTeachers(){const o=(0,n.IO)(this.profileCollection,(0,n.ar)("is_blocked","==",!1),(0,n.ar)("is_teacher","==",!1));return(0,s.D)((0,n.PL)(o)).pipe((0,u.U)(d=>d.docs.map(p=>p.data())))}getUsersInList(o){if(!o||!o.length)return(0,c.of)([]);const d=(0,n.IO)(this.profileCollection,(0,n.ar)("uid","in",o));return(0,s.D)((0,n.PL)(d)).pipe((0,u.U)(O=>O.docs.map(y=>y.data())))}getUser(o){const d=(0,n.JU)(this.profileCollection,o);return(0,s.D)((0,n.QT)(d)).pipe((0,u.U)(p=>p.data()))}getUserChanges(o){const d=(0,n.JU)(this.profileCollection,o);return(0,n.KO)(d).pipe((0,u.U)(p=>p.data()))}updateUser(o){const d=(0,n.JU)(this.profileCollection,o.uid);return(0,s.D)((0,n.QT)(d)).pipe((0,v.w)(p=>(o.updated_on=t.EK.now(),p.exists()?(0,s.D)((0,n.r7)(d,o)):(o.created_on=t.EK.now(),(0,s.D)((0,n.pl)(d,o))))))}}g.\u0275fac=function(o){return new(o||g)},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})},8217:(h,f,e)=>{e.d(f,{B:()=>s});var i=e(2560),n=e(745),t=e(3954);class s{constructor(){this.mediaService=(0,i.f3M)(t.y)}transform(c){return c?this.mediaService.getMedia(c):(0,n.of)("")}}s.\u0275fac=function(c){return new(c||s)},s.\u0275pipe=i.Yjl({name:"mediaUrl",type:s,pure:!0})},8915:(h,f,e)=>{e.d(f,{e:()=>t});var i=e(2560),n=e(9785);class t{constructor(){this.userApiService=(0,i.f3M)(n.Q)}getUser(u){return this.userApiService.getUser(u)}getUserChanges(u){return this.userApiService.getUserChanges(u)}}t.\u0275fac=function(u){return new(u||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})},4466:(h,f,e)=>{e.d(f,{m:()=>t});var i=e(4666),n=e(2560);class t{}t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[i.ez]})},8027:(h,f,e)=>{var i=e(4497),n=e(9510),t=e(2560),s=e(4164),u=e(9337);class c{constructor(){this.authService=(0,t.f3M)(s._o),this.router=(0,t.f3M)(n.F0)}canActivate(r,l){return console.log(r,l),this.authService.isAuthenticated().pipe((0,u.b)(E=>{E||this.router.navigate(["/auth"])}))}}c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});const v=[{path:"",loadChildren:()=>e.e(113).then(e.bind(e,9113)).then(a=>a.DashboardModule)},{path:"auth",loadChildren:()=>e.e(845).then(e.bind(e,7845)).then(a=>a.LoginModule)},{path:"profile",loadChildren:()=>e.e(765).then(e.bind(e,4765)).then(a=>a.ProfileModule),canActivate:[c]},{path:"teacher",loadChildren:()=>e.e(42).then(e.bind(e,3042)).then(a=>a.TeacherModule),canActivate:[c]}];class m{}m.\u0275fac=function(r){return new(r||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[n.Bz.forRoot(v),n.Bz]});var g=e(116),C=e(635),o=e(5403),d=e(4666),p=e(2673),O=e(4874),y=e(745),B=e(8915),Z=e(8217);function _(a,r){if(1&a){const l=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(l);const Q=t.oxw();return t.KtG(Q.toggle())}),t._UZ(1,"nb-icon",5),t.qZA()}}const x=function(){return["/auth"]};function K(a,r){1&a&&(t.TgZ(0,"a",6),t._UZ(1,"nb-icon",7),t.qZA()),2&a&&t.Q6J("routerLink",t.DdM(1,x))}function F(a,r){if(1&a&&(t._UZ(0,"nb-user",9),t.ALo(1,"async"),t.ALo(2,"mediaUrl")),2&a){const l=r.ngIf;t.Q6J("picture",l.avatar_urls&&t.lcZ(1,2,t.lcZ(2,4,l.avatar_urls[0]))||"")("name",l.first_name+" "+l.last_name)}}function W(a,r){if(1&a&&(t.YNc(0,F,3,6,"nb-user",8),t.ALo(1,"async")),2&a){const l=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,l.user$))}}class A{constructor(){this.sidebarService=(0,t.f3M)(o.lzT),this.nbAuthService=(0,t.f3M)(s._o),this.route=(0,t.f3M)(n.gz),this.router=(0,t.f3M)(n.F0),this.authService=(0,t.f3M)(B.e),this.isLoggedIn$=this.nbAuthService.isAuthenticated(),this.user$=this.nbAuthService.getToken().pipe((0,p.w)(r=>this.authService.getUserChanges(r.getPayload().user_id))),this.title$=this.router.events.pipe((0,g.h)(r=>r instanceof n.m2),(0,O.O)(this.router),(0,p.w)(()=>{let r=this.route.firstChild;for(;r?.firstChild;)r=r.firstChild;return r?.data??(0,y.of)({title:"Admin"})}),(0,C.U)(r=>r.title))}toggle(){this.sidebarService.toggle()}}function z(a,r){1&a&&(t.TgZ(0,"nb-layout-header",3),t._UZ(1,"app-header"),t.qZA())}A.\u0275fac=function(r){return new(r||A)},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-header"]],decls:10,vars:10,consts:[["nbButton","","status","basic","size","tiny","class","burger",3,"click",4,"ngIf"],[1,"navigation"],["class","login","nbButton","","status","basic","size","tiny",3,"routerLink",4,"ngIf","ngIfElse"],["loggedIn",""],["nbButton","","status","basic","size","tiny",1,"burger",3,"click"],["icon","menu-outline"],["nbButton","","status","basic","size","tiny",1,"login",3,"routerLink"],["icon","person-outline"],[3,"picture","name",4,"ngIf"],[3,"picture","name"]],template:function(r,l){if(1&r&&(t.YNc(0,_,2,0,"button",0),t.ALo(1,"async"),t.TgZ(2,"h1"),t._uU(3),t.ALo(4,"async"),t.qZA(),t.TgZ(5,"div",1),t.YNc(6,K,2,2,"a",2),t.ALo(7,"async"),t.YNc(8,W,2,3,"ng-template",null,3,t.W1O),t.qZA()),2&r){const E=t.MAs(9);t.Q6J("ngIf",t.lcZ(1,4,l.isLoggedIn$)),t.xp6(3),t.Oqu(t.lcZ(4,6,l.title$)),t.xp6(3),t.Q6J("ngIf",!t.lcZ(7,8,l.isLoggedIn$))("ngIfElse",E)}},dependencies:[d.O5,n.rH,o.fMN,o.DPz,o.k0$,d.Ov,Z.B],styles:["[_nghost-%COMP%]{display:flex;align-items:center;width:100%}.navigation[_ngcontent-%COMP%]{margin-left:auto}.burger[_ngcontent-%COMP%]{--button-filled-basic-background-color: transparent;--button-filled-basic-hover-background-color: transparent;--button-filled-basic-focus-background-color: transparent;margin-right:16px}.burger[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{--button-tiny-icon-size: 20px}.login[_ngcontent-%COMP%]{--button-filled-basic-background-color: transparent;--button-filled-basic-hover-background-color: transparent;--button-filled-basic-focus-background-color: transparent;text-transform:lowercase}.login[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{--button-tiny-icon-size: 20px}"],changeDetection:0});class P{constructor(){this.title="admin-panel",this.items=[{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",link:"/"},{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"/profile",pathMatch:"full"},{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439",link:"/teacher",pathMatch:"prefix"},{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432",link:"/student",pathMatch:"full"},{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",link:"/contact",pathMatch:"full"},{title:"\u041e \u043d\u0430\u0441",link:"/about",pathMatch:"full"},{title:"\u0412\u044b\u0439\u0442\u0438",link:"/auth/logout"}],this.router=(0,t.f3M)(n.F0),this.sidebarService=(0,t.f3M)(o.lzT),this.hasHeader$=this.router.events.pipe((0,g.h)(r=>r instanceof n.m2),(0,C.U)(r=>r.url),(0,C.U)(r=>{const l=!r.includes("auth");return l||this.sidebarService.collapse(),l}))}}P.\u0275fac=function(r){return new(r||P)},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-root"]],decls:8,vars:8,consts:[["fixed","",4,"ngIf"],["state","collapsed"],[3,"items"],["fixed",""]],template:function(r,l){1&r&&(t.TgZ(0,"nb-layout"),t.YNc(1,z,2,0,"nb-layout-header",0),t.ALo(2,"async"),t.TgZ(3,"nb-sidebar",1),t._UZ(4,"nb-menu",2),t.qZA(),t.TgZ(5,"nb-layout-column"),t.ALo(6,"async"),t._UZ(7,"router-outlet"),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,4,l.hasHeader$)),t.xp6(3),t.Q6J("items",l.items),t.xp6(1),t.ekj("main-layout",t.lcZ(6,6,l.hasHeader$)))},dependencies:[d.O5,n.lC,o.Aqw,o.dP_,o.dmS,o.nZR,o.mBz,A,d.Ov],styles:["nb-sidebar[_ngcontent-%COMP%], nb-sidebar[_ngcontent-%COMP%] > div.main-container[_ngcontent-%COMP%]{transition:width .3s}.main-layout[_ngcontent-%COMP%]{--layout-padding: 1rem}"]});var D=e(9674);const U={firebase:{projectId:"adminpanelfire",appId:"1:459068437086:web:9a4362f897fc83db06bacf",storageBucket:"adminpanelfire.appspot.com",apiKey:"AIzaSyCPPEzrugMj8qBy_XV11rpre81fj_fJGK0",authDomain:"adminpanelfire.firebaseapp.com",messagingSenderId:"459068437086"}};var I=e(3291),b=e(8563),L=e(8873),T=e(4849),S=e(7204),H=e(9906),J=e(9557),R=e(9779),$=e(1879),j=e(4466);class M{}M.\u0275fac=function(r){return new(r||M)},M.\u0275mod=t.oAB({type:M,bootstrap:[P]}),M.\u0275inj=t.cJS({providers:[{provide:$.Dh,useValue:U.firebase}],imports:[i.b2,m,(0,D.hX)(()=>(0,D.ZF)(U.firebase)),(0,I.AR)(()=>(0,I.v0)()),(0,b.v8)(()=>(0,b.N8)()),(0,L.Cm)(()=>(0,L.ad)()),(0,T.W$)(()=>(0,T.$C)()),(0,S.Vq)(()=>(0,S.cF)()),H.rT,o.SDF.forRoot({name:"default"}),R.Nk,s.S.forRoot({forms:{login:{strategy:"password",rememberMe:!0,socialLinks:[]},register:{strategy:"password",terms:!0,socialLinks:[]},logout:{strategy:"password"},requestPassword:{strategy:"password",socialLinks:[]},resetPassword:{strategy:"password",socialLinks:[]},validation:{password:{required:!0,minLength:6,maxLength:50},email:{required:!0}}},strategies:[R.F3.setup({name:"password",login:{redirect:{success:"/"}},register:{redirect:{success:"/auth"}},logout:{redirect:{success:"/"}},requestPassword:{redirect:{success:"/auth"}},resetPassword:{redirect:{success:"/auth"}}})]}),o.BW0,o.P1.forRoot(),o.j5J.forRoot(),o.j7H.forRoot({closeOnBackdropClick:!0}),o.LW9.forRoot({duration:2e3,position:o.fe3.TOP_RIGHT}),o.KdK,o.T2N,o.AE1,J.$,j.m]}),i.q6().bootstrapModule(M).catch(a=>console.error(a))}},h=>{h.O(0,[736],()=>{return i=8027,h(h.s=i);var i});h.O()}]);
//# sourceMappingURL=main.6d8e8256a7e139ce.js.map